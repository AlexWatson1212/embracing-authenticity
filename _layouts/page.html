---
layout: default
---

<article class="page-layout">

  {%- comment -%}
  ==========================================================
  PAGE HERO (optional)
  - Shows ONLY if page.hero_image exists in front matter
  - Uses page.title + page.description (or page.subtitle fallback)
  - Keeps a real <h1> on the page for SEO, but visually hides it
  ==========================================================
  {%- endcomment -%}

  {% if page.hero_image %}
    <section
      class="page-hero"
      style="--hero-image: url('{{ page.hero_image | relative_url }}');"
      aria-label="{{ page.title | escape }}"
    >
      <div class="page-hero__inner">
        <h1 class="page-hero__title">{{ page.title }}</h1>

        {% if page.description %}
          <p class="page-hero__subtitle">{{ page.description }}</p>
        {% elsif page.subtitle %}
          <p class="page-hero__subtitle">{{ page.subtitle }}</p>
        {% endif %}
      </div>
    </section>
  {% endif %}

  <div class="container prose">
    {%- comment -%}
    SEO H1 fallback:
    - If hero exists, we keep an <h1> but hide it visually (sr-only)
    - If no hero, show normal <h1> at top
    {%- endcomment -%}

    {% if page.hero_image %}
      <h1 class="sr-only">{{ page.title }}</h1>
    {% else %}
      <h1>{{ page.title }}</h1>
      {% if page.subtitle %}
        <p class="lead">{{ page.subtitle }}</p>
      {% endif %}
      {% if page.description %}
        <p class="lead">{{ page.description }}</p>
      {% endif %}
    {% endif %}

    {{ content }}
  </div>

  {%- comment -%}
  ==========================================================
  PRINCIPLES NAVIGATION (Collection items in _principles/)
  - Only shows on principles collection items
  - Uses `order` for prev/next
  ==========================================================
  {%- endcomment -%}

  {% if page.collection == "principles" and page.order %}
    {% assign principles = site.principles | sort: "order" %}

    {% assign current_index = nil %}
    {% for p in principles %}
      {% if p.url == page.url %}
        {% assign current_index = forloop.index0 %}
      {% endif %}
    {% endfor %}

    {% if current_index != nil %}
      {% assign prev_index = current_index | minus: 1 %}
      {% assign next_index = current_index | plus: 1 %}

      {% assign prev = nil %}
      {% assign next = nil %}

      {% if prev_index >= 0 %}
        {% assign prev = principles[prev_index] %}
      {% endif %}

      {% if next_index < principles.size %}
        {% assign next = principles[next_index] %}
      {% endif %}

      <nav class="principle-nav container" aria-label="Principle navigation">
        <hr class="section-divider" />

        <div class="principle-nav-links">
          <!-- Back to Principles index page -->
          <a class="principle-nav-back" href="/principles/">← Back to Principles</a>

          <div class="principle-step-links">
            <!-- Previous Principle -->
            {% if prev %}
              <a class="principle-nav-prev" href="{{ prev.url }}">← Previous Principle</a>
            {% endif %}

            <!-- Next Principle -->
            {% if next %}
              <a class="principle-nav-next" href="{{ next.url }}">Next Principle →</a>
            {% endif %}
          </div>
        </div>
      </nav>
    {% endif %}
  {% endif %}

</article>
