<!doctype html>
<html lang="en">
<head>
  <!-- DEFAULT layout -->
  {% include head.html %}

  {%- comment -%}
    Performance: allow pages (like index.html) to inject resource preloads.
    In index.html we set: {% assign preload = '<link rel="preload" ...>' %}
    This outputs it safely inside <head>.
  {%- endcomment -%}
  {% if preload %}{{ preload }}{% endif %}

  {%- comment -%}
    Optional improvement (fonts): if you use Google Fonts via <link> in head.html,
    consider ensuring display=swap and/or self-hosting later.
  {%- endcomment -%}
</head>

<body>
  <a class="sr-only" href="#content">Skip to content</a>

  {% include header.html %}

  <main id="content" class="site-content">
    {{ content }}
  </main>

  {% include footer.html %}

  {% if site.google_analytics %}
    {% include analytics.html %}
  {% endif %}

  <!-- Defer site JS (already good) -->
  <script src="{{ '/assets/js/nav.js' | relative_url }}" defer></script>
  <script src="{{ '/assets/js/search.js' | relative_url }}" defer></script>

  <!-- Google tag (gtag.js) - async is correct -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-1G5FKYL0R4"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-1G5FKYL0R4');
  </script>
</body>
</html>
