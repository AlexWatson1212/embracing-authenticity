---
layout: default
title: Blog
---

<section class="blog-intro fade-in">
  <h2>Blog</h2>
  <p>
    This is where I share thoughts, stories, and reflections on what it means to live more honestly and authentically. 
    <a href="#blogPosts" class="scroll-link">Click here to skip to the blogs</a> or search by emotion below.
  </p>
</section>

<!-- Emotion Filter (Simplified) -->
<div class="emotion-filter fade-in">
  <p>Search by emotion:</p>
  {% assign simple_emotions = "grief,shame,fear,anger,loneliness,hope,love,joy,longing,acceptance" | split: "," %}
  {% for emotion in simple_emotions %}
    <a href="#blogPosts" class="emotion-button scroll-link" data-emotion="{{ emotion }}">{{ emotion | capitalize }}</a>
  {% endfor %}
  <button class="emotion-button clear-emotion-filter" id="clearEmotions">Clear</button>
</div>

<section class="blog-list" id="blogPosts">
  {% for post in site.posts %}
    <article class="blog-card fade-in" data-tags="{{ post.tags | join: ',' }}" data-emotions="{{ post.emotions | join: ',' }}">
      <div class="blog-card-content">
        <h3><a href="{{ post.url }}">{{ post.title }}</a></h3>
        <p class="post-date">{{ post.date | date: "%B %d, %Y" }}</p>
        <p class="excerpt">{{ post.description | default: post.excerpt | strip_html | truncatewords: 24 }}</p>
        
        <!-- Emotion Bubbles -->
        {% assign shown_emotions = post.emotions | slice: 0, 2 %}
        <div class="tag-list">
          {% for emotion in shown_emotions %}
            <span class="tag">{{ emotion | capitalize }}</span>
          {% endfor %}
          {% if post.emotions.size > 2 %}
            <span class="tag">+{{ post.emotions.size | minus: 2 }} more</span>
          {% endif %}
        </div>

        <a href="{{ post.url }}" class="read-more">Read More →</a>
      </div>
    </article>
  {% endfor %}
  <div class="back-to-top fade-in">
    <a href="#" class="scroll-link">Back to Top ↑</a>
  </div>
</section>

<script>
  const tagButtons = document.querySelectorAll('.post-tag[data-tag]');
  const emotionButtons = document.querySelectorAll('.emotion-button[data-emotion]');
  const clearButton = document.getElementById('clearTags');
  const clearEmotionButton = document.getElementById('clearEmotions');
  const posts = document.querySelectorAll('.blog-card');
  const blogSection = document.getElementById('blogPosts');

  function scrollToBlogWithOffset() {
    const offset = 80;
    const elementPosition = blogSection.getBoundingClientRect().top + window.scrollY;
    window.scrollTo({
      top: elementPosition - offset,
      behavior: 'smooth'
    });
  }

  tagButtons.forEach(button => {
    button.addEventListener('click', e => {
      e.preventDefault();
      tagButtons.forEach(btn => btn.classList.remove('active'));
      button.classList.add('active');
      const tag = button.getAttribute('data-tag');
      posts.forEach(post => {
        const tags = post.getAttribute('data-tags');
        post.style.display = tags.includes(tag) ? 'block' : 'none';
      });
      scrollToBlogWithOffset();
    });
  });

  clearButton?.addEventListener('click', () => {
    tagButtons.forEach(btn => btn.classList.remove('active'));
    posts.forEach(post => post.style.display = 'block');
    scrollToBlogWithOffset();
  });

  emotionButtons.forEach(button => {
    button.addEventListener('click', e => {
      e.preventDefault();
      emotionButtons.forEach(btn => btn.classList.remove('active'));
      button.classList.add('active');
      const emotion = button.getAttribute('data-emotion');
      posts.forEach(post => {
        const emotions = post.getAttribute('data-emotions') || '';
        post.style.display = emotions.includes(emotion) ? 'block' : 'none';
      });
      scrollToBlogWithOffset();
    });
  });

  clearEmotionButton?.addEventListener('click', () => {
    emotionButtons.forEach(btn => btn.classList.remove('active'));
    posts.forEach(post => post.style.display = 'block');
    scrollToBlogWithOffset();
  });

  const scrollLinks = document.querySelectorAll('.scroll-link');
  scrollLinks.forEach(link => {
    link.addEventListener('click', e => {
      e.preventDefault();
      scrollToBlogWithOffset();
    });
  });

  const faders = document.querySelectorAll('.fade-in');
  const appearOptions = { threshold: 0.1, rootMargin: "0px 0px -50px 0px" };
  const appearOnScroll = new IntersectionObserver((entries, observer) => {
    entries.forEach(entry => {
      if (!entry.isIntersecting) return;
      entry.target.classList.add("in-view");
      observer.unobserve(entry.target);
    });
  }, appearOptions);

  faders.forEach(fader => {
    appearOnScroll.observe(fader);
  });
</script>
